(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{107:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(23),c=t.n(r),o=(t(60),t(61),t(2)),s=(t(62),t(3)),m=t(24),i=t(110),u=t(126),d=t(111),f=t(112),p=t(113),E=t(6),b=t.n(E),g=t(1),v=t(47),N=t(48),h=t(54),y=t(53),w=t(15),j=t.n(w),O=function(e){return j.a.get("/api/users/email/"+e)},k=function(e){return j.a.post("/api/markers",e)},x=function(){return localStorage.removeItem("user")},C=function(e){return j.a.post("/api/signup",e)},L=function(e){return j.a.post("/api/signin",e)},S=Object(n.createContext)({user:{},search:""}),P=function(e){Object(h.a)(t,e);var a=Object(y.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={user:{},search:""},e.setUser=function(a){e.setState({user:a})},e}return Object(N.a)(t,[{key:"render",value:function(){return l.a.createElement(S.Provider,{value:Object(g.a)(Object(g.a)({},this.state),{},{setUser:this.setUser})},this.props.children)}}]),t}(l.a.Component),_=function(){return l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-outline-light",onClick:function(){return x}},"Log Out"))};delete b.a.Icon.Default.prototype._getIconUrl,b.a.Icon.Default.mergeOptions({iconRetinaUrl:t(81),iconUrl:t(82),shadowUrl:t(83)});var A=function(e){var a=Object(n.useContext)(S),t=a.user.markers,r=a.user.usertags,c=Object(n.useState)("ALL"),o=Object(s.a)(c,2),E=o[0],b=o[1],g=(t[0].lat,t[0].long),v=[],N=[];return t.map((function(e){(e.tags.includes(E)||"ALL"===E)&&(N.push(e),v.push([e.lat,e.long]))})),g=v[0],l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark custom-nav"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("ul",{className:"navbar-nav nav-fill w-100"},l.a.createElement("li",{className:"nav-item"},l.a.createElement("span",{className:"fancy blue"},"Wanderings ",l.a.createElement("i",{class:"fas fa-ring"}))),l.a.createElement("li",{className:"nav-item"},l.a.createElement("a",{className:"nav-link",href:"#"},l.a.createElement(_,null))),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},"Tags ",l.a.createElement("span",{id:"tag-name"},"(",E,")")),l.a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},l.a.createElement("li",{className:"tag-list-item clickable",value:"ALL",key:"ALL",onClick:function(){b("ALL")}},"ALL"),r.map((function(e){return l.a.createElement("li",{className:"tag-list-item clickable",value:e,key:e,onClick:function(a){b(e)}},e)})))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{className:"nav-link",to:"/upload",onClick:e.toggle},l.a.createElement("i",{className:"fas fa-plus"})))))),l.a.createElement(i.a,{center:g,zoom:25,scrollWheelZoom:!1},l.a.createElement(u.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),N.map((function(e){return l.a.createElement(d.a,{color:"#707fbc",key:e.id,position:[e.lat,e.long]},l.a.createElement(f.a,null,l.a.createElement("span",null,e.name),l.a.createElement("div",{className:"leaflet-popup-image-com-row"},l.a.createElement("img",{src:e.image,alt:e.name,width:"100"}),l.a.createElement("p",null,e.comments),e.tags.map((function(e){return l.a.createElement("span",{className:"popup-tag clickable",value:e,key:e,onClick:function(a){b(e)}},e)})))))})),l.a.createElement(p.a,{color:"#707fbc",positions:v})))},D=t(25),U=t.n(D);U.a.setAppElement("#root");var I=function(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],r=a[1];function c(){console.log("Modal: functionToggleModal: ",t),r(!t)}return Object(n.useEffect)((function(){"true"!==sessionStorage.getItem("AnnouncementOnce")&&(c(),console.log("Modal: useEffect: ",t),sessionStorage.setItem("AnnouncementOnce","true"))}),[]),l.a.createElement("div",null,l.a.createElement(U.a,{isOpen:t,onRequestClose:c,contentLabel:"My dialog",className:"mymodal",overlayClassName:"myoverlay"},l.a.createElement("div",null,l.a.createElement("span",{className:"text-center"},l.a.createElement("h2",null,"Disclaimer")),l.a.createElement("ul",null,l.a.createElement("li",null,"We\u2019re not responsible if you walk into traffic or off of a cliff"),l.a.createElement("li",null,"Please be responsible, pay attention, use your best judgement"),l.a.createElement("li",null,"Don\u2019t trespass or explore unsafe/abandoned structures")),l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{onClick:c,className:"btn custom-btn"},"Agree")))))},z=function(){return l.a.createElement("div",null,l.a.createElement(I,null),l.a.createElement(P,null,l.a.createElement(A,null)))},M=t(16),T=t.n(M),F=t(22),W=t(17),q=function(){var e=Object(n.useState)({}),a=Object(s.a)(e,2),t=a[0],r=a[1],c=Object(n.useContext)(S).setUser,o=function(e){var a=e.target,n=a.name,l=a.value;r(Object(g.a)(Object(g.a)({},t),{},Object(W.a)({},n,l)))},m=function(){var e=Object(F.a)(T.a.mark((function e(a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,L(t);case 3:console.log("login: this is what login gets ",t),i();case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),i=function(){var e=Object(F.a)(T.a.mark((function e(){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t.email);case 2:a=e.sent,c(a.data[0]),console.log("Login: heres the user ",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"card custom-card signup-card text-center"},l.a.createElement("form",{id:"signupForm"},l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formEmail",className:"form-label col-sm-2 col-form-label"},"Email"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"text",id:"formEmail",name:"email",placeholder:"email",onChange:o}))),l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formPassword",className:"form-label col-sm-2 col-form-label"},"Password"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"password",id:"formPassword",name:"password",placeholder:"Password",onChange:o}))),l.a.createElement("button",{className:"btn custom-btn m-2",onClick:m},"Login!")))},B=function(){var e=Object(n.useState)({}),a=Object(s.a)(e,2),t=a[0],r=a[1],c=Object(n.useContext)(S).setUser,o=function(e){var a=e.target,n=a.name,l=a.value;r(Object(g.a)(Object(g.a)({},t),{},Object(W.a)({},n,l)))},m=function(){var e=Object(F.a)(T.a.mark((function e(a){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,C(t);case 3:return n={email:t.email,password:t.password},L(n),e.next=7,i(t.email);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),i=function(){var e=Object(F.a)(T.a.mark((function e(a){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(a);case 2:t=e.sent,c(t.data[0]),console.log("signup: heres the user ",t.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"card custom-card signup-card text-center"},l.a.createElement("form",{id:"signupForm"},l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formName",className:"form-label col-sm-2 col-form-label"},"Username"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"text",id:"formName",name:"name",placeholder:"Username",onChange:o}))),l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formEmail",className:"form-label col-sm-2 col-form-label"},"Email"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"text",id:"formEmail",name:"email",placeholder:"email",onChange:o}))),l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formPassword",className:"form-label col-sm-2 col-form-label"},"Password"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"password",id:"formPassword",name:"password",placeholder:"Password",onChange:o}))),l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formConfirmPassword",className:"form-label col-sm-2 col-form-label"},"Confirm Password"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"password",id:"password_confirmation",name:"password_confirmation",placeholder:"confirm password",onChange:o}))),l.a.createElement("button",{className:"btn custom-btn mb-2",onClick:m},"Sign Up!")))};var R=function(){return l.a.createElement("div",{className:"card custom-card signup-card text-center p-3"},l.a.createElement("h1",{className:"m-2"},"Welcome to ",l.a.createElement("span",{className:"fancy"},"Wanderings")," ",l.a.createElement("i",{className:"fas fa-ring"})),l.a.createElement("h2",{className:"mb-2"},"Explore - Interact - Document - Share"),l.a.createElement("p",{className:"text-start"},l.a.createElement("span",{className:"fancy"},"Wanderings")," wants to help you explore and make note of cool stuff around you. Whether that means checking out your own neighborhood or going on a grand adventure. Make note of local businesses, street art, historic markers, or natural wonders and save a marker on your map of where you saw them. Mark your favorite coffee shop or the summit of the mountain you've climbed and tag them for easy retrieval."))},G=function(){var e=Object(n.useState)(!0),a=Object(s.a)(e,2),t=a[0],r=a[1];return t?l.a.createElement("div",null,l.a.createElement("div",{className:"container d-flex justify-content-center"},l.a.createElement(R,null)),l.a.createElement("div",{className:"container d-flex justify-content-center"},l.a.createElement(P,null,l.a.createElement(q,null))),l.a.createElement("div",{className:"container-fluid d-flex justify-content-center"},l.a.createElement("p",null,l.a.createElement("button",{className:"btn custom-btn m-2",onClick:function(){return r(!1)}},"Sign up instead!")))):l.a.createElement("div",null,l.a.createElement("div",{className:"container d-flex justify-content-center"},l.a.createElement(R,null)),l.a.createElement("div",{className:"container-fluid d-flex justify-content-center"},l.a.createElement(P,null,l.a.createElement(B,null))),l.a.createElement("div",{className:"container-fluid d-flex justify-content-center"},l.a.createElement("p",null,l.a.createElement("button",{className:"btn custom-btn m-2",onClick:function(){return r(!0)}},"Login instead!"))))},J=t(51),Z=t.n(J),H=t(114),K=t(115),Q=t(116),V=t(117),X=t(118),Y=t(119),$=t(120),ee=t(121),ae=t(122),te=t(123),ne=t(124),le=t(125),re=function(e){var a="https://wanderings-project.herokuapp.com",t="I just posted a new marker and image on Wanderings!";return l.a.createElement("div",{className:"m-2"},l.a.createElement(H.a,{url:a,quote:t},l.a.createElement(K.a,{size:45,round:!0})),l.a.createElement(Q.a,{url:a,title:t},l.a.createElement(V.a,{size:45,round:!0})),l.a.createElement(X.a,{url:a,media:e.media,description:t},l.a.createElement(Y.a,{size:45,round:!0})),l.a.createElement($.a,{url:a},l.a.createElement(ee.a,{size:45,round:!0})),l.a.createElement(ae.a,{url:a,title:t},l.a.createElement(te.a,{size:45,round:!0})),l.a.createElement(ne.a,{url:a,summary:t},l.a.createElement(le.a,{size:45,round:!0})))};var ce=function(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(""),o=Object(s.a)(c,2),m=o[0],i=o[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),f=d[0],p=d[1],E=Object(n.useState)({user_id:"60a01207f65faee88a5ac831",title:"",image:"astring",tags:"",lat:"48",lon:"-48",comments:""}),b=Object(s.a)(E,2),v=b[0],N=b[1],h=function(e){var a=e.image_metadata.GPSLatitude,t=e.image_metadata.GPSLongitude,n=a.replace("deg","\xb0")+t.replace("deg","\xb0"),l=new Z.a(n),r=l.getLatitude(),c=l.getLongitude();console.log(r,c),N(Object(g.a)(Object(g.a)({},v),{},{image:e.secure_url,lat:r,lon:c}))},y=function(e){var a=e.target,t=a.name,n=a.value;N(Object(g.a)(Object(g.a)({},v),{},Object(W.a)({},t,n))),console.log(v)};function w(){p(!f)}return l.a.createElement("div",null,l.a.createElement(A,{toggle:w}),l.a.createElement(U.a,{isOpen:f,onRequestClose:w,contentLabel:"My dialog",className:"mymodal",overlayClassName:"myoverlay"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"scroll-component"},l.a.createElement("div",{className:"text-center scroll-content"},l.a.createElement("p",{className:"mt-3"},'Select file and click "upload", then enter info and click "save" to save to a marker and clear the form.'),l.a.createElement("form",{id:"uploadForm"},l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formFile",className:"form-label col-sm-2 col-form-label"},"File"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control m-2",type:"file",id:"formFile",onChange:function(e){return r(e.target.files[0])}}))),l.a.createElement("button",{className:"btn custom-btn m-2",onClick:function(e){e.preventDefault();var a=new FormData;a.append("file",t),a.append("upload_preset","mutxq4jo"),a.append("cloud_name","dlzfsefy4"),fetch("https://api.cloudinary.com/v1_1/dlzfsefy4/image/upload",{method:"post",body:a}).then((function(e){return e.json()})).then((function(e){console.log(e),i(e.secure_url),h(e)})).catch((function(e){return console.log(e)}))}},"upload"),l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formTitle",className:"form-label col-sm-2 col-form-label"},"Title"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"text",id:"formTitle",name:"title",placeholder:"title",onChange:y}))),l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formCaption",className:"form-label col-sm-2 col-form-label"},"Caption"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"text",id:"formCaption",name:"comments",placeholder:"caption (optional)",onChange:y}))),l.a.createElement("div",{className:"row m-2"},l.a.createElement("label",{for:"formTags",className:"form-label col-sm-2 col-form-label"},"Tags"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{className:"form-control",type:"text",id:"formTags",name:"tags",placeholder:"tags, separated by commas"}))),l.a.createElement(re,{media:m}),l.a.createElement("button",{className:"btn custom-btn m-2",onClick:function(e){e.preventDefault(),console.log(v);var a=document.getElementById("formTags").value;console.log(a);var t=a.split(",");console.log(t);var n=t.map((function(e){return e.trim()}));console.log(n),console.log(v),k({user_id:v.user_id,title:v.title,image:v.image,tags:n,lat:v.lat,lon:v.lon,comments:v.comments}).then(console.log(v)).then((document.getElementById("uploadForm").reset(),void i(" "))).catch((function(e){return console.log(e)}))}},"save")),l.a.createElement("div",{className:"container"},l.a.createElement("img",{src:m,className:"display-image mb-2"})))))))},oe=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/",component:G}),l.a.createElement(o.a,{path:"/home",component:z}),l.a.createElement(o.a,{path:"/upload",component:ce})))};c.a.render(l.a.createElement(m.a,null,l.a.createElement(oe,null)),document.getElementById("root"))},55:function(e,a,t){e.exports=t(107)},60:function(e,a,t){},62:function(e,a,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.ff28b453.chunk.js.map